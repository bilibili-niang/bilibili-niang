"use strict";(self.webpackChunkblogfront=self.webpackChunkblogfront||[]).push([[545],{2545:function(e,t,l){l.r(t),l.d(t,{default:function(){return _}});var a=l(3396),o=l(7139);const s={class:"noteList"},i={class:"btns"},n=(e=>((0,a.dD)("data-v-086d11c2"),e=e(),(0,a.Cn)(),e))((()=>(0,a._)("br",null,null,-1))),d={class:"left noteLim"},u={class:"newNote"},r={class:"noteListLim"},c={class:"list-group list-group-flush"},h={key:0,class:"right noteLim"},m={class:"imageLim"};var w=l(9324),p=l(6e3),v=l(7178);const g={class:"noteListItem"},k={class:"icon"},f=["src"];t={name:"NoteListItem",props:{item:{type:Object},showNote:{type:Function,default:()=>{}}},data(){},methods:{addNewChildrenNote(e){}}},l=l(89);var _=(0,l.Z)({name:"noteList",components:{NoteListItem:(0,l.Z)(t,[["render",function(e,t,l,s,i,n){const d=(0,a.up)("el-col"),u=(0,a.up)("el-text");var r=(0,a.up)("el-row");const c=(0,a.up)("ArrowRight"),h=(0,a.up)("el-icon"),m=(0,a.up)("el-button"),w=(0,a.up)("More"),p=(0,a.up)("Plus");return(0,a.wg)(),(0,a.iD)("div",g,[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{span:4},{default:(0,a.w5)((()=>[(0,a._)("div",k,[(0,a._)("img",{src:l.item.icon,alt:""},null,8,f)])])),_:1}),(0,a.Wm)(d,{span:20},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{truncated:"",onClick:t[0]||(t[0]=e=>l.showNote(l.item.id)),class:"hvr-shadow"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(l.item.note_title),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(r,{class:"iconList"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{span:4},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{link:""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(d,{span:4},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{link:""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(w)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(d,{span:4},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{link:"",onClick:t[1]||(t[1]=e=>n.addNewChildrenNote(l.item))},{default:(0,a.w5)((()=>[(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p)])),_:1})])),_:1})])),_:1})])),_:1})])}],["__scopeId","data-v-406e474f"]])},data(){return{notesList:[],title:"",noteData:{},showRight:!1,nowId:"",drawer:!1,showDrawer:!1,value:"preview",options:[{value:"edit",label:"edit"},{value:"editable",label:"editable"},{value:"preview",label:"preview"}]}},created(){this.initNotesList()},methods:{goToShareLink(e){},shareNoteById(e){w.ZP.$axios({url:"/note/publicNote",method:"POST",headers:{token:!0},data:{id:e}}).then((e=>{this.alertMessage(e.message)})).catch((e=>{this.alertMessage(e)}))},submitChildrenNote(e,t){w.ZP.$axios({url:"/"})},addNewChildrenNote(e){p.T.prompt(`将会在 ${e.note_title} 下新建笔记`,"新建一个笔记",{confirmButtonText:"就这个了",cancelButtonText:"算了",inputPattern:/[\u4e00-\u9fa5_a-zA-Z0-9_]{4,10}/,inputErrorMessage:"只能是数字,字母,特殊字符",inputValidator:e=>!0}).then((({value:t})=>{var l=e["id"];this.submitChildrenNote(t,l),(0,v.z8)({type:"success",message:"Your email is:"+t})})).catch((()=>{(0,v.z8)({type:"info",message:"Input canceled"})}))},alertMessage(e,t,l){l=l||"red",(0,v.z8)({message:(0,a.h)("p",null,[(0,a.h)("span",null,e),(0,a.h)("i",{style:"color: "+l},t)]),grouping:!0})},getItemId(e){this.showNote(e)},saveNote(){w.ZP.$axios({url:"/note/saveNote",method:"POST",headers:{token:!0},data:{id:this.noteData.id,data:this.noteData}}).then((e=>{this.initNotesList(),this.alertMessage(e.message,"success","#a1c4fd")})).catch((e=>{}))},async handleEvent(e){83===e.keyCode&&(e.preventDefault(),e.returnValue=!1,this.saveNote())},showNote(e){this.nowId=e,w.ZP.$axios({url:"/note/getNote",method:"POST",headers:{token:!0},data:{id:e}}).then((e=>{e.success&&(null==e.result.content&&(e.result.content="> type your first title!"),this.noteData=e.result)})).catch((e=>{}))},submitNewNote(){w.ZP.$axios({url:"/note/addNote",method:"POST",headers:{token:!0},data:{note_title:this.title}}).then((e=>{e.success&&(this.initNotesList(),this.title="")})).catch((e=>{}))},initNotesList(){w.ZP.$axios({url:"/note/allNotes",method:"POST",headers:{token:!0}}).then((e=>{e.success&0!=e.result.length?(this.showRight=!0,this.notesList=e.result,this.notesList[0].id&&(this.nowId?this.showNote(this.nowId):this.showNote(this.notesList[0].id))):(this.alertMessage(e.message,"数据渲染失败咯","#a1c4fd"),this.showRight=!1)}))}},mounted(){window.addEventListener("keydown",this.handleEvent)},beforeDestroy(){window.removeEventListener("keydown",this.handleEvent)}},[["render",function(e,t,l,w,p,v){const g=(0,a.up)("el-button"),k=(0,a.up)("el-input"),f=(0,a.up)("el-text"),_=(0,a.up)("el-option");var N=(0,a.up)("el-select"),W=(0,a.up)("el-drawer");const D=(0,a.up)("el-divider"),b=(0,a.up)("NoteListItem");var L=(0,a.up)("v-md-editor");return(0,a.wg)(),(0,a.iD)("div",s,[(0,a._)("div",i,[(0,a.Wm)(g,{onClick:t[0]||(t[0]=e=>p.drawer=!0)},{default:(0,a.w5)((()=>[(0,a.Uk)("check all")])),_:1}),(0,a.Wm)(k,{class:"m-r",modelValue:p.noteData.note_title,"onUpdate:modelValue":t[1]||(t[1]=e=>p.noteData.note_title=e),placeholder:"Please input"},null,8,["modelValue"]),(0,a.Wm)(g,{onClick:t[2]||(t[2]=e=>p.showDrawer=!0)},{default:(0,a.w5)((()=>[(0,a.Uk)("share")])),_:1}),p.noteData.allowView?((0,a.wg)(),(0,a.j4)(f,{key:0},{default:(0,a.w5)((()=>[(0,a.Uk)("公开分享")])),_:1})):((0,a.wg)(),(0,a.j4)(f,{key:1},{default:(0,a.w5)((()=>[(0,a.Uk)("没有公开分享")])),_:1})),p.noteData.allowView?((0,a.wg)(),(0,a.j4)(g,{key:2,onClick:t[3]||(t[3]=e=>v.goToShareLink(p.noteData.id))},{default:(0,a.w5)((()=>[(0,a.Uk)("check share link ")])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(N,{modelValue:p.value,"onUpdate:modelValue":t[4]||(t[4]=e=>p.value=e),placeholder:"Select"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(p.options,(e=>((0,a.wg)(),(0,a.j4)(_,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,a.Wm)(W,{modelValue:p.showDrawer,"onUpdate:modelValue":t[5]||(t[5]=e=>p.showDrawer=e),title:"是否分享你的笔记",size:"50%"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Uk)(' noteData: { "id": 6, "note_title": "面试说的话", "allowView": 0, "content": "> type your first title!", "cover": "/images/cover/1.png", "icon": "/images/icon/default.png", "allowComment": 0, "allowEditUserList": null } '),n,(0,a.Uk)(" "+(0,o.zw)(p.noteData)+" ",1),(0,a.Wm)(g,{"@click":v.shareNoteById(p.noteData.id)},{default:(0,a.w5)((()=>[(0,a.Uk)("share")])),_:1},8,["@click"])])])),_:1},8,["modelValue"]),(0,a.Wm)(W,{modelValue:p.drawer,"onUpdate:modelValue":t[8]||(t[8]=e=>p.drawer=e),size:"25%",direction:"ltr",title:"I am the title","with-header":!1},{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Uk)("my note list")])),_:1}),(0,a._)("div",d,[(0,a._)("div",u,[(0,a.Wm)(k,{modelValue:p.title,"onUpdate:modelValue":t[6]||(t[6]=e=>p.title=e),placeholder:"新建一个"},null,8,["modelValue"]),(0,a.Wm)(g,{onClick:t[7]||(t[7]=e=>v.submitNewNote())},{default:(0,a.w5)((()=>[(0,a.Uk)(" 提交 ")])),_:1})]),(0,a.Wm)(D),(0,a._)("div",r,[(0,a._)("ul",c,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(p.notesList,((e,t)=>((0,a.wg)(),(0,a.iD)("li",{class:"list-group-item",key:t},[(0,a.Wm)(b,{item:e,showNote:v.getItemId},null,8,["item","showNote"])])))),128))])])])])),_:1},8,["modelValue"]),p.showRight?((0,a.wg)(),(0,a.iD)("div",h,[(0,a.Wm)(L,{"include-level":[3,4],onSave:v.saveNote,modelValue:p.noteData.content,"onUpdate:modelValue":t[9]||(t[9]=e=>p.noteData.content=e),"disabled-menus":[],mode:p.value},null,8,["onSave","modelValue","mode"])])):(0,a.kq)("",!0),(0,a._)("div",m,[(0,a._)("div",{class:"cover",style:(0,o.j5)({backgroundImage:"url("+p.noteData.cover+")",backgroundRepeat:"no-repeat"})},null,4)])])}],["__scopeId","data-v-086d11c2"]])}}]);