"use strict";(self.webpackChunkblogfront=self.webpackChunkblogfront||[]).push([[785],{7785:function(e,a,l){l.r(a),l.d(a,{default:function(){return g}});var t=l(3396),s=l(4870),c=l(65),n=l(6e3),u=l(7178),o=l(9324),r=l(1827);const i={class:"headImg container"},d={class:"upload"},m=(e=>((0,t.dD)("data-v-9bc6cdc0"),e=e(),(0,t.Cn)(),e))((()=>(0,t._)("form",{action:"/file/avatar"},null,-1))),v={class:"demo-image__lazy"},f=["src"];a={__name:"HeadImg",setup(e){let a=(0,s.iH)();const l=()=>{a.value.show(_.value)};var g=(0,c.oR)();const p=(0,s.iH)([]),h=g.state.user.userInfo.token,_=(0,s.iH)([]),k=((0,t.bv)((()=>{k()})),()=>{o.ZP.$axios({url:"/user/headImg",method:"POST",headers:{token:!0}}).then((e=>{e.success&&(p.value=e.result,_.value=p.value.map((e=>e.url)))})).catch((e=>{}))}),w=async()=>{await o.ZP.$axios({url:"/user/getUserInfByToken",method:"POST",headers:{token:!0}}),k()},b=e=>e.size<=2e6?(u.z8.success("上传成功"),!0):(u.z8.error("请选择2mb大小以下的图片"),!1);return(e,c)=>{var o=(0,t.up)("el-text");const g=(0,t.up)("Plus"),k=(0,t.up)("el-icon");var I=(0,t.up)("el-upload");const y=(0,t.up)("el-button");var C=(0,t.up)("iceImgPreview");return(0,t.wg)(),(0,t.iD)("div",i,[(0,t._)("div",d,[(0,t.Wm)(o,null,{default:(0,t.w5)((()=>[(0,t.Uk)(" 或者你可以上传图片: ")])),_:1}),(0,t.Wm)(I,{class:"avatar-uploader",data:{token:(0,s.SU)(h)},action:"/file/headImg","show-file-list":!0,"on-success":w,"before-upload":b},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{class:"avatar-uploader-icon"},{default:(0,t.w5)((()=>[(0,t.Wm)(g)])),_:1})])),_:1},8,["data"]),m]),(0,t._)("div",v,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(p.value,((e,a)=>((0,t.wg)(),(0,t.iD)("div",{key:a,class:"demo-image__preview"},[(0,t._)("img",{src:e.url,alt:"",class:"image",onClick:l},null,8,f),(0,t.Wm)(y,{text:"",onClick:a=>{var l;l=e.url,n.T.confirm("确定删除该图片吗","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((()=>{r.Z.operateImage("del",l),(0,u.z8)({type:"success",message:"Delete completed"})})).catch((()=>{(0,u.z8)({type:"info",message:"Delete canceled"})}))}},{default:(0,t.w5)((()=>[(0,t.Uk)("删除")])),_:2},1032,["onClick"])])))),128))]),(0,t.Wm)(C,{ref_key:"imgPreviewRef",ref:a,imgUrls:_.value,closeIconRight:""},null,8,["imgUrls"])])}}};var g=(0,l(89).Z)(a,[["__scopeId","data-v-9bc6cdc0"]])}}]);